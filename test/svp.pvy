import vapoursynth as vs
core = vs.get_core(threads=5)

core.std.LoadPlugin(path="/home/voran/Downloads/vapoursynth/plugins/lib/vapoursynth/ffms2.so")
#core.std.LoadPlugin(path="/home/voran/Downloads/vapoursynth/plugins/lib/vapoursynth/libsvpflow1_vs64.so")
#core.std.LoadPlugin(path="/home/voran/Downloads/vapoursynth/plugins/lib/vapoursynth/libsvpflow2_vs64.so")

clip = core.ffms2.Source(source='mountains.mp4')
clip = clip.resize.Bicubic(format=vs.YUV420P8)

super_params='{"gpu":1}'
analyse_params=""
smoothfps_params='{"rate":{"num":5,"den":2}}'

super  = core.svp1.Super(clip,super_params)
vectors= core.svp1.Analyse(super["clip"],super["data"],clip,analyse_params)
smooth = core.svp2.SmoothFps(clip,super["clip"],super["data"],vectors["clip"],vectors["data"],smoothfps_params)
smooth = core.std.AssumeFPS(smooth,fpsnum=smooth.fps_num,fpsden=smooth.fps_den)

smooth.set_output()
